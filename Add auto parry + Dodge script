-- Blade Ball Auto Parry + Auto Spam + Auto Dodge + GUI
-- Por Nehemías (tu nombre) - personalizado para móvil y Delta Executor

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local VirtualInput = game:GetService("VirtualInputManager")
local UserInputService = game:GetService("UserInputService")

local player = Players.LocalPlayer
local char = player.Character or player.CharacterAdded:Wait()
local hrp = char:WaitForChild("HumanoidRootPart")

local UIS = UserInputService

-- Configuración
local AutoParry = true
local AutoSpam = false
local AutoDash = true

local ParryDistance = 22
local DashDistance = 15
local DashCooldown = 1
local lastDash = 0

-- Crear GUI
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "BladeBallHelper"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = player:WaitForChild("PlayerGui")

local Frame = Instance.new("Frame")
Frame.Size = UDim2.new(0, 160, 0, 100)
Frame.Position = UDim2.new(0, 10, 0, 10)
Frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
Frame.BorderSizePixel = 0
Frame.Parent = ScreenGui

local function CreateToggle(text, default, callback)
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(1, -10, 0, 25)
    btn.Position = UDim2.new(0, 5, 0, 5 + (#Frame:GetChildren()-1)*30)
    btn.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    btn.TextColor3 = Color3.new(1,1,1)
    btn.Text = text .. ": " .. (default and "ON" or "OFF")
    btn.Parent = Frame

    local state = default
    btn.MouseButton1Click:Connect(function()
        state = not state
        btn.Text = text .. ": " .. (state and "ON" or "OFF")
        callback(state)
    end)
    return btn
end

-- Toggle botones para controlar funciones
CreateToggle("Auto Parry", AutoParry, function(state) AutoParry = state end)
CreateToggle("Auto Spam", AutoSpam, function(state) AutoSpam = state end)
CreateToggle("Auto Dash", AutoDash, function(state) AutoDash = state end)

-- Función para presionar tecla F (Parry)
local function pressParry()
    VirtualInput:SendKeyEvent(true, Enum.KeyCode.F, false, game)
    task.wait(0.05)
    VirtualInput:SendKeyEvent(false, Enum.KeyCode.F, false, game)
end

-- Función para usar Dash (tecla Q)
local function pressDash()
    VirtualInput:SendKeyEvent(true, Enum.KeyCode.Q, false, game)
    task.wait(0.05)
    VirtualInput:SendKeyEvent(false, Enum.KeyCode.Q, false, game)
end

-- Auto Spam loop
task.spawn(function()
    while true do
        if AutoSpam then
            pressParry()
            task.wait(0.25)
        else
            task.wait(0.1)
        end
    end
end)

-- Main loop Auto Parry + Auto Dash
RunService.RenderStepped:Connect(function()
    if not player.Character or not player.Character:FindFirstChild("HumanoidRootPart") then return end
    hrp = player.Character.HumanoidRootPart

    local ball = workspace:FindFirstChild("Ball")
    if ball and ball:IsA("BasePart") then
        local dist = (ball.Position - hrp.Position).Magnitude
        local velocity = ball.Velocity
        local approaching = velocity.Unit:Dot((hrp.Position - ball.Position).Unit) > 0.5

        if AutoParry and dist <= ParryDistance and approaching then
            pressParry()
        end

        if AutoDash and dist <= DashDistance and approaching then
            local now = tick()
            if now - lastDash >= DashCooldown then
                pressDash()
                lastDash = now
            end
        end
    end
end)
