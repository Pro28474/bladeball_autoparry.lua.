local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

local screenGui = Instance.new("ScreenGui")
screenGui.Name = "NehemiasInvisibleGUI"
screenGui.Parent = game:GetService("CoreGui")

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 180, 0, 70)
frame.Position = UDim2.new(0.5, -90, 0.3, 0)
frame.BackgroundColor3 = Color3.fromRGB(30,30,30)
frame.BorderSizePixel = 0
frame.Active = true
frame.Draggable = true
frame.Parent = screenGui

local title = Instance.new("TextLabel")
title.Text = "Nehemías"
title.Size = UDim2.new(1, 0, 0, 25)
title.BackgroundColor3 = Color3.fromRGB(50,50,50)
title.TextColor3 = Color3.new(1,1,1)
title.Font = Enum.Font.SourceSansBold
title.TextSize = 18
title.Parent = frame

local invisibleButton = Instance.new("TextButton")
invisibleButton.Size = UDim2.new(0.8, 0, 0, 35)
invisibleButton.Position = UDim2.new(0.1, 0, 0, 30)
invisibleButton.BackgroundColor3 = Color3.fromRGB(0, 120, 255)
invisibleButton.TextColor3 = Color3.new(1,1,1)
invisibleButton.Font = Enum.Font.SourceSansBold
invisibleButton.TextSize = 18
invisibleButton.Text = "Invisible: OFF"
invisibleButton.Parent = frame

local invisible = false
local clone = nil
local originalParent = nil

local function setTransparency(model, transparency)
	for _, part in pairs(model:GetDescendants()) do
		if part:IsA("BasePart") then
			part.Transparency = transparency
		elseif part:IsA("Decal") or part:IsA("Texture") then
			part.Transparency = transparency
		end
	end
end

local function enableInvisible()
	local character = LocalPlayer.Character
	if not character then return end

	-- Guardar parent para restaurar luego
	originalParent = character.Parent

	-- Clonar personaje para que vos lo veas
	clone = character:Clone()
	clone.Name = "InvisibleClone"
	clone.Parent = workspace

	-- Poner clone un poco transparente para que vos lo veas
	setTransparency(clone, 0.4)

	-- Mover el personaje real fuera de workspace (para que los demás no te vean)
	character.Parent = nil
end

local function disableInvisible()
	local character = LocalPlayer.Character or clone
	if not character then return end

	-- Restaurar personaje real a workspace
	if originalParent then
		character.Parent = originalParent
		originalParent = nil
	end

	-- Quitar clone
	if clone then
		clone:Destroy()
		clone = nil
	end

	-- Restaurar transparencia normal
	setTransparency(character, 0)
end

invisibleButton.MouseButton1Click:Connect(function()
	invisible = not invisible
	if invisible then
		invisibleButton.Text = "Invisible: ON"
		invisibleButton.BackgroundColor3 = Color3.fromRGB(0, 170, 0)
		enableInvisible()
	else
		invisibleButton.Text = "Invisible: OFF"
		invisibleButton.BackgroundColor3 = Color3.fromRGB(0, 120, 255)
		disableInvisible()
	end
end)

LocalPlayer.CharacterAdded:Connect(function(char)
	wait(1)
	if invisible then
		enableInvisible()
	end
end)
